<%= form_for [company, product], html: {multipart: true} do |p| %>
  <div class="row bg-light form-row-override">
    <div class="col-12 col-lg-8 p-lg-5 pt-4">
      <% if product.errors.any? %>
        <div class="errors alert alert-danger" role="alert">
          <ul>
            <% product.errors.full_messages.each do |error| %>
              <li><%= error %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div class="form-group row">
        <%= p.label :name, class: "col-sm-2 col-form-label" %>
        <div class="col-sm-10">
          <%= p.text_field :name, class: "form-control" %>
        </div>
      </div>
      
      <div class="form-group row">
        <%= p.label :discription, class: "col-sm-2 col-form-label" %>
        <div class="col-sm-10">
          <%= p.text_area :discription, class: "form-control" %>
        </div>
      </div>
      
      <div class="form-group row">
        <%= p.label :price, class: "col-sm-2 col-form-label" %>
        <div class="col-sm-10">
          <%= p.text_field :price, class: "form-control number-field" %>
        </div>
      </div>

      <div class="form-group row">
        <%= p.label :images, "+ Images", class: "col-sm-2 col-form-label" %>
        <div class="col-sm-10">
          <%= p.file_field :images, multiple: true, onchange: "show_previews(this);" %>
        </div>
      </div>
      <%= p.hidden_field :images_to_be_deleted, value: "" %>
      <%= p.submit %>
    </div>
    
    <div class="img-preview-div col-12 col-lg-4 pt-lg-5">
      <div id="preview-grid-container" class="container grid-container preview-grid-container">
        <% if !@product.new_record? && @product.images.present? %>
          <% @product.images.each do |image| %>
            <div class="grid-item preview-grid saved-preview" onclick="delete_image(this)" data-id=<%= image.id %>>
              <%= image_tag image %>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
<% end %>

